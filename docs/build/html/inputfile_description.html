

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. Input file format &mdash; CFDwavemaker v2.1.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Example of usage" href="inputfile_examples.html" />
    <link rel="prev" title="4. Installation and usage" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo3.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v2.1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">2. Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_instructions.html">3. Build from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">4. Installation and usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Input file format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#version">5.1. Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wave-types">5.2. Wave types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-input-data">5.3. General input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wave-reference-point">5.4. Wave reference point</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ramps">5.5. Ramps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#irregular-wave-specification">5.6. Irregular wave specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manual-specification">5.6.1. Manual specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spectral-specification">5.6.2. Spectral specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#second-order-wave-theory">5.6.3. Second order wave theory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#stokes-regular-wave-specification">5.7. Stokes regular wave specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wavemaker-theory-wave-specification">5.8. Wavemaker theory wave specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#piston-wavemaker-theory">5.8.1. Piston wavemaker theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hinched-wavemaker-theory">5.8.2. Hinched wavemaker theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dual-hinched-wavemaker-theory">5.8.3. Dual-hinched wavemaker theory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#spectral-wave-data-swd-specification">5.9. Spectral wave data (SWD) specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid-interpolation-schemes">5.10. Grid interpolation schemes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lagrangian-stretched-grid-interpolation-lsgrid">5.10.1. Lagrangian-Stretched grid interpolation (LSgrid)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output">5.11. Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vtk">5.11.1. VTK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-series">5.11.2. Time-series</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spectral-data">5.11.3. Spectral data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tips-tricks">5.12. Tips &amp; tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inputfile_examples.html">6. Example of usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">7. Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">8. Wave theories</a></li>
<li class="toctree-l1"><a class="reference internal" href="todolist.html">9. Todo-list</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">10. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">11. References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CFDwavemaker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Input file format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/inputfile_description.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="input-file-format">
<h1><span class="section-number">5. </span>Input file format<a class="headerlink" href="#input-file-format" title="Permalink to this headline">¶</a></h1>
<p>For CFDwavemaker to run, an input file containing all required data must be specified. The name of this file must be <em>“waveinput.dat”</em>, and should be located in the path of where the library or program calling CFDwavemaker is run. If this file cannot be located the program will stop and an error message will show in the standard output.</p>
<p>The input file system is made up of keywords and tags. Every keyword as a certain number of mandatory tags, and some which are optional. To distinguish between a keyword and a tag, square braces are used for keywords while tags are outlined in red. To be more specific:</p>
<p><strong>[This is a keyword]</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">tag</span></code></p>
<p>All tags belong to a keyword. The order of the keywords are almost arbitrary with one exceptions:</p>
<ul class="simple">
<li><p>It is generally wise to specified which wave type to use before specifying other keywords.</p></li>
</ul>
<p>Comments are permitted in the input files using # ,which will be stripped away before reading the file.
All tags and keywords are ALWAYS given with lower caps letters. Space is used as separator between keyword and values.</p>
<p>All keywords available in CFDwavemaker (and what they do) are described in sections underneath.</p>
<div class="section" id="version">
<h2><span class="section-number">5.1. </span>Version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<p>CFDwavemaker has been developed over many years of iteration where new functionalities and improvements have been added along the way. The input format introduced in versiion 2.*.* is quite different from the original input fileformat. A cleanup was neccessary and therefore the support for old input files (pre v2) have been discontinued. Two versions are now supported:</p>
<ul class="simple">
<li><p><strong>&#64;v201</strong> which is this initial implementation</p></li>
<li><p><strong>&#64;v213</strong> up-to-date format, as described in the section below.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please make sure to clearly specify the input file format version in the first line of the input file adding either: &#64;v213 or &#64;v201 in the first line. If this is omitted, the program will assume you are using &#64;v201.</p>
</div>
</div>
<div class="section" id="wave-types">
<h2><span class="section-number">5.2. </span>Wave types<a class="headerlink" href="#wave-types" title="Permalink to this headline">¶</a></h2>
<p>CFDwavemaker currently support the following wave theories. Which branch of wave theory to used is controlled by the keyword <strong>[wave type]</strong></p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">irregular</span></code> - irregular wave theory (linear or second order)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regular</span></code> - Stokes regular wave theory (up to 5th order)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wavemaker</span></code> - Wave maker theory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">swd</span></code> - <a class="reference external" href="http://https://github.com/SpectralWaveData">Spectral-Wave-Data</a> (swd) is an external library for generating  through DNVGLs HOSM wave model</p></li>
</ol>
<p>In general, the most effort has been put into second order irregular wave theory, which is why this library was made in the first place. More wave theories may be added in the future.</p>
<p>To chose one of the above use the following code word</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[wave type]
# WAVETYPE
irregular
</pre></div>
</div>
</div>
<div class="section" id="general-input-data">
<h2><span class="section-number">5.3. </span>General input data<a class="headerlink" href="#general-input-data" title="Permalink to this headline">¶</a></h2>
<p>Some data are mandatory for all wave types. These parameters are specified under the tag <strong>[general input data]</strong>.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">depth</span></code></p></td>
<td><p>Water depth used to generate wave height</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mtheta</span></code></p></td>
<td><p>(mean) wave direction. In case of long-crested unidirectional waves, this input prepresents the wave direction, while for short-crested waves, this represents the mean wave direction. Value is given in degrees where a value of 0 corresponds to wave propagating along the x-axis in the positive direction.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">swl</span></code></p></td>
<td><p>Still water level. default value = 0.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">normalize</span></code></p></td>
<td><p>Normalize the wave by dividing the spetral values by the spectral 0th moment. This is useful to produce focused irregular waves. Default value = 0 (False)</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">amplify</span></code></p></td>
<td><p>Used to amplify the spectral parameters. can be used to scale all amplitudes of a wave spectrum. Default value = 1.</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<p>Finally, an example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[general input data]
depth  1.2
mtheta  0.0000
swl  0.
normalize  0
amplify  1.
</pre></div>
</div>
</div>
<div class="section" id="wave-reference-point">
<h2><span class="section-number">5.4. </span>Wave reference point<a class="headerlink" href="#wave-reference-point" title="Permalink to this headline">¶</a></h2>
<p>A reference point in time and space for the wave specification is needed. This is specified using the tag <strong>[wave reference point]</strong>, as shown in the example given below. time is given in seconds, position x and y are given in meters.
Specifying the <strong>[wave reference point]</strong> is optional. If this is not given, default values will be assumed.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p></td>
<td><p>reference point in time. (default value: <code class="docutils literal notranslate"><span class="pre">time</span></code> = 0)</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p>reference point in space, x-axis. (default value: <code class="docutils literal notranslate"><span class="pre">x</span></code> = 0)</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
<td><p>reference point in space, y-coordinate. (default value: <code class="docutils literal notranslate"><span class="pre">y</span></code> = 0)</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[wave reference point]
# for focused waves this will correspond to the focus point in time and space
time  15.0
x  3.5
y  0.0
</pre></div>
</div>
</div>
<div class="section" id="ramps">
<h2><span class="section-number">5.5. </span>Ramps<a class="headerlink" href="#ramps" title="Permalink to this headline">¶</a></h2>
<p>Ramps can sometimes be useful to avoid transient behaviour for example in at startup, or when specifying wave kinematics in corners of a domain. Ramps are specified in time and space (x and y plane only) by calling the keyword <strong>[ramps]</strong> followed by the ramp input. The ramp may be omitted all together, in which case no ramp of any kind is used.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time_rampup</span></code></p></td>
<td><p>keyword for adding a time rampup. Three values follows. An on/off swith using the value 0 or 1, the starttime of the ramp, and the end time of the ramp. The function starts at a value of 0.0 at t &lt;= starttime, and increases linearily towards a value of 1.0 at t &gt;= endtime.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">time_rampdown</span></code></p></td>
<td><p>keyword for adding a time rampdown. Three values follows. An on/off swith using the value 0 or 1, the starttime of the ramp, and the end time of the ramp. Rampdown function is the inverse of the rampup function. this function starts with a value of 1.0 at time &lt;=starttime, and linearily goes towards 0. at endtime.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">x_rampup</span></code></p></td>
<td><p>keyword for adding a rampup in x-direction. Three values follows. An on/off swith using the value 0 or 1, the start position of the ramp, and the end position of the ramp. The function starts at a value of 0.0 at x &lt;= startpos, and increases linearily towards a value of 1.0 at x &gt;= endpos.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x_rampdown</span></code></p></td>
<td><p>keyword for adding a rampdown in x-direction. Three values follows. An on/off swith using the value 0 or 1, the startpos of the ramp, and the end time of the ramp. Rampdown function is the inverse of the rampup function. this function starts with a value of 1.0 at x &lt;=startpos, and linearily goes towards 0. at endpos.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y_rampup</span></code></p></td>
<td><p>same description as <code class="docutils literal notranslate"><span class="pre">x_rampup</span></code>, only for y-diretion</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">y_rampdown</span></code></p></td>
<td><p>same description as <code class="docutils literal notranslate"><span class="pre">x_rampdown</span></code>, only for y-diretion</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[ramps]
# rampname on/off starttime endtime
time_rampup  1  0.0000  3.0
time_rampdown  0  0.0000  1.0
# rampname on/off startpos endpos
x_rampup  0  -11.0000  -10.0
x_rampdown  0  11.0000  12.0
y_rampup  0  -11.0000  -10.0
y_rampdown  0  11.0000  12.0
</pre></div>
</div>
</div>
<div class="section" id="irregular-wave-specification">
<h2><span class="section-number">5.6. </span>Irregular wave specification<a class="headerlink" href="#irregular-wave-specification" title="Permalink to this headline">¶</a></h2>
<p>Irregular waves can be specified in several ways, but to keep it simple, we destinguish between two categories of specification:</p>
<ol class="arabic simple">
<li><p>Manual specification - frequency components, directional components, amplitudes, etc are specified manually. This is useful when you want complete control or need to run a simulation where the spectral components are have been calculated by another program.</p></li>
<li><p>Spectral specification - CFDwavemaker does the job for you. <strong>Note: it should be noted that spectral specification is not yet fully implemented.</strong></p></li>
</ol>
<div class="section" id="manual-specification">
<h3><span class="section-number">5.6.1. </span>Manual specification<a class="headerlink" href="#manual-specification" title="Permalink to this headline">¶</a></h3>
<p>The tag <strong>[irregular wave components]</strong> needs to present. This tag requires the following information to follow:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nfreq</span></code></p></td>
<td><p>number of frequency components to read from input file. A list of frequency component data should follow, where the number of entries (lines) must correspond to the number of components specified with this parameter. For each component the following data should be given on a single line, separate by space:
<strong>1. frequency:</strong> given in rad/s.
<strong>2. amplitude:</strong> given in meters.
<strong>3. wave number:</strong> wave number assosiated with the frequency (specified in rad/m.
<strong>4. phase:</strong> Random phase, value between 0 and 2*PI (specified in radians).
<strong>5. theta:</strong> (only specified if <a href="#id1"><span class="problematic" id="id2">``</span></a>ndir``= 0) direction of frequency component (specified in radians).</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ndir</span></code></p></td>
<td><p>number of directional components and the assosiated wave spreading, to read from input file. The directional components should follow directly after the list of frequency component data. <code class="docutils literal notranslate"><span class="pre">ndir</span></code> may be set to zero, in which case the program will look for an additional fifth column in the list of frequency components data, specifying the direction of each single frequency component.</p></td>
<td><p>yes</p></td>
</tr>
</tbody>
</table>
<p>Example 1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[irregular wave components]
nfreq 5
ndir 0
# OMEGA [rad/s]    A[m]       K[rad/m]        Phase[rad]    theta[rad]
0.80684460     0.09098686     0.06636591    22.09105101    -0.51238946
0.57527858     0.08989138     0.03410555    -8.15520380    -1.01219701
0.59315305     0.20143761     0.03615181    -8.35009702    -0.92729522
0.71493207     0.09704876     0.05213889    11.00239563    -0.58800260
0.73560378     0.15043259     0.05518335    14.76881712    -0.55165498
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[irregular wave components]
nfreq 4
ndir 19
# OMEGA [rad/s] A [m]     K          Phase [rad]
    5.2033     0.0369     2.7670     0.0000
    5.3014     0.0356     2.8708     0.0000
    5.3996     0.0343     2.9767     0.0000
    5.4978     0.0331     3.0849     0.0000
# DIRS [rad]      Density
    -0.7854       0.042843
     -0.69813     0.045853
     -0.61087     0.048652
      -0.5236     0.051192
     -0.43633     0.053426
     -0.34907     0.055313
      -0.2618     0.056819
     -0.17453     0.057916
    -0.087266     0.058583
            0     0.058806
     0.087266     0.058583
      0.17453     0.057916
       0.2618     0.056819
      0.34907     0.055313
      0.43633     0.053426
       0.5236     0.051192
      0.61087     0.048652
      0.69813     0.045853
       0.7854     0.042843
</pre></div>
</div>
</div>
<div class="section" id="spectral-specification">
<h3><span class="section-number">5.6.2. </span>Spectral specification<a class="headerlink" href="#spectral-specification" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module has been disabled since it is not complete and tested. Please use manual specification <strong>[Manual specification]</strong> for now.</p>
</div>
<p>The second of initializing an irregular wave field. The tag <strong>[irregular spectral properties]</strong> needs to be specified, followed by the following data</p>
<p>to be updated.</p>
<p>Example 1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[irregular spectral properties]
# spectral definition
w0 0.05
dw 0.05
wmax 0.5
random_seed 123
spectrum jonswap3
hs 10.0
tp 15.0
gamma 3.0
#spreading definition
spread cosn
n 4
type random_draw
dir_seed 1234
event_select_criterion crestmax
event_number 3 # selecting to run the third largest event
event_posx 10. # m, position of where to look for maxima (x-coord)
event_posy 12. # m, &quot;    (y-coord)
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[irregular spectral properties]
# spectral definition
w_min 0.05
w_max 0.5
dw 0.05
random_seed 9947793
spectrum torsethaugen2004
hs 5.5
tp 8.3
#spreading definition
spread cos2s
s 15
type integrate
theta_min -1.57
theta_max 1.57
dtheta 0.3491
event_select_criterion waveheightmax
eventnumber 1 # selecting to run the largest wave height
</pre></div>
</div>
</div>
<div class="section" id="second-order-wave-theory">
<h3><span class="section-number">5.6.3. </span>Second order wave theory<a class="headerlink" href="#second-order-wave-theory" title="Permalink to this headline">¶</a></h3>
<p>By default, the waves which are generated uses linear wave theory. To switch on the use of second order wave theory (which you DO want todo for steep waves), the keyword <strong>[second order]</strong> must be specified, followed by some optional control parameters</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bandwidth</span></code></p></td>
<td><p>control the bandwidth of which frequencies that are allowed to interact in the second order sum and difference terms. For wide band spectra this is recommended. default value is “off”, which implies that all frequencies are allowed to interact in the second order terms. Alternatively bandwidth=auto can be used and CFDwavemaker will approximate a reasonable bandwidth for you from the spectral moments, i.e bandwidth``=0.7*m0/m1. The third alternative is to specify a value given in rad/s.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">extmeth</span></code></p></td>
<td><p>Choice of extrapolation method. By default a second order taylor expansion (eularian coordinate system) is used (<a href="#id3"><span class="problematic" id="id4">``</span></a>extmeth``= 0). A second order lagrangian implementation will be supported in the near future (extmeth = 1).</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[second order]
bandwidth 0.5
extmet 2
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The keyword <strong>[second order]</strong> is only for irregular wave theory. If other theories are used, this keyword is ignored.</p>
</div>
</div>
</div>
<div class="section" id="stokes-regular-wave-specification">
<h2><span class="section-number">5.7. </span>Stokes regular wave specification<a class="headerlink" href="#stokes-regular-wave-specification" title="Permalink to this headline">¶</a></h2>
<p>Sir George Stokes solved this nonlinear wave problem in 1847 by expanding the relevant potential flow quantities in a Taylor series around the mean (or still) surface elevation. As a result, the boundary conditions can be expressed in terms of quantities at the mean (or still) surface elevation. Stokes’s regular wave theory is of direct practical use for waves on intermediate and deep water. It is used in the design of coastal and offshore structures, in order to determine the wave kinematics (free surface elevation and flow velocities).
Several implementations of these waves exists. The implementation in CFDwavemaker is based on Ref <a class="bibtex reference internal" href="references.html#skjelbreia1960fifth" id="id5">[7]</a> and goes up to 5th order.</p>
<p>To specify the properties of the Stokes waves the following keyword is used: <strong>[stokes wave properties]</strong>. The properties that follows are given in the table below.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">wave_length</span></code></p></td>
<td><p>Length of the stokes wave. units in meters.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">wave_height</span></code></p></td>
<td><p>Height of the Stokes wave, measured from through to crest (i.e. not amplitude). units in meters.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">order</span></code></p></td>
<td><p>order to use for regular stokes waves. valid input is number from 1 to 5. Default is 5.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">current_speed</span></code></p></td>
<td><p>Current speed. Current speed direction in same direction as wave propagation. units in m/s.</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[stokes wave properties]
#mandatory properties for stokes wave
wave_length  300.
wave_height  20.
current_speed 0.
</pre></div>
</div>
</div>
<div class="section" id="wavemaker-theory-wave-specification">
<h2><span class="section-number">5.8. </span>Wavemaker theory wave specification<a class="headerlink" href="#wavemaker-theory-wave-specification" title="Permalink to this headline">¶</a></h2>
<p>Wavemaker theory may sometimes be useful when validating wave propagation against model test data were a physical wave maker has been used to generate the waves.</p>
<div class="section" id="piston-wavemaker-theory">
<h3><span class="section-number">5.8.1. </span>Piston wavemaker theory<a class="headerlink" href="#piston-wavemaker-theory" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id9">
<span id="pistonwavemaker"></span><img alt="Example of edinbourgh designs piston wave makers" src="http://www.edesign.co.uk/wp-content/uploads/2013/02/IMGP3051.jpg" />
<p class="caption"><span class="caption-number">Fig. 5.1 </span><span class="caption-text">Example of <a class="reference external" href="http://www4.edesign.co.uk/product/piston-wave-generators/">Edinbourgh Designs</a> piston wave maker</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
<div class="legend">
</div>
</div>
<p>A piston wave maker is a flat wall which moves horizontally, thereby generating waves (see <a class="reference internal" href="#pistonwavemaker"><span class="std std-numref">Fig. 5.1</span></a>). In some cases one may be so lucky to get the position of the wall as output from a wave basin tests. This position signal may be used to generate kinematics using piston wave maker theory <a class="bibtex reference internal" href="references.html#kennard1949generation" id="id6">[5]</a>.
To use piston wave maker theory <strong>[wave type]</strong> must first be set to <em>wavemaker</em>. Secondly, the piston wave maker input signal must be specified. This is done through <strong>[piston wavemaker properties]</strong>
A list of the required input is given below.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ntimesteps</span></code></p></td>
<td><p>number of timesteps that the time-series that follows consists of. Three columns are required. the first is <strong>Time</strong>, second is <strong>Piston horizontal amplitude</strong> and third is <strong>Piston horizontal velocity</strong>. Piston hosisontal amplitude is the piston position signal (subtracting the mean). It the velocity is not available, it is recommended to use the gradient of the piston position signal</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alpha_z</span></code></p></td>
<td><p>Simple way of adjusting the amplitude time series. default value for this this is 0. Amplitude applied when calculating kinematics are Piston_ampl = Piston_horizontal_amplitude_time_series + alpha_z</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alpha_u</span></code></p></td>
<td><p>Simple way of adjusting the velocity time series. default value for this this is 0. Amplitude applied when calculating kinematics are Piston_velo = Piston_horizontal_velocity_time_series + alpha_u</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<p>The time-series describing the wave maker motions shall follow directly after the input parameter as shown in the example below.</p>
<p>Example 1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[piston wavemaker properties]
# for piston wave maker
# alpha values for adjusting elevation and velocity
ntimesteps 24000
alpha_z 0.0
alpha_u 0.1
# Number of lines to be read (time,amplitude,velocity)
0.0000  0.0000942  0.0109990
0.0025  0.0001217  0.0103278
0.0050  0.0001458  0.0089456
0.0075  0.0001664  0.0075024
0.0100  0.0001833  0.0060345
0.0125  0.0001966  0.0045800
0.0150  0.0002062  0.0031888
0.0175  0.0002125  0.0019247
0.0200  0.0002159  0.0008472
...
</pre></div>
</div>
</div>
<div class="section" id="hinched-wavemaker-theory">
<h3><span class="section-number">5.8.2. </span>Hinched wavemaker theory<a class="headerlink" href="#hinched-wavemaker-theory" title="Permalink to this headline">¶</a></h3>
<p>Implementation ongoing.</p>
</div>
<div class="section" id="dual-hinched-wavemaker-theory">
<h3><span class="section-number">5.8.3. </span>Dual-hinched wavemaker theory<a class="headerlink" href="#dual-hinched-wavemaker-theory" title="Permalink to this headline">¶</a></h3>
<p>Implementation ongoing.</p>
</div>
</div>
<div class="section" id="spectral-wave-data-swd-specification">
<h2><span class="section-number">5.9. </span>Spectral wave data (SWD) specification<a class="headerlink" href="#spectral-wave-data-swd-specification" title="Permalink to this headline">¶</a></h2>
<p>The Spectral-Wave-Data library is an open-source library which provides an open interface for how to exchange spectral ocean wave kinematics between computer programs. This provides a very useful extension to CFDwavemaker, which facilitates external wave theories, as long as they can write the output in the .swd format. This includes wave theories such as (but of course not limited to):</p>
<ul class="simple">
<li><p>higher order spectral methods (HOSM) such as generated by <a class="reference external" href="https://projects.dnvgl.com/sesam/status/Wamod/Wamod.html?id=WAMOD_12-DEC-2019_2&amp;typ=new%20feature&amp;showVersion=yes">WAMOD</a></p></li>
<li><p>Fenton-Stream waves and other regular wave theories, using the open python source code <a class="reference external" href="https://pypi.org/project/raschii/">raschii</a></p></li>
</ul>
<p>To read swd files in CFDwavemaker, <strong>[wave type]</strong> = swd, and the following list of parameters can be specified under the keyword <strong>[swd wave properties]</strong>:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">swdfile</span></code></p></td>
<td><p>Name of swd file. Obviously this is mandatory. a full path may be specified if the file is located in another directory than the  default run directory. (spaces in the file path is not permitted)</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nsumx</span></code></p></td>
<td><p>Number of spectral components to apply in x direction (&lt;0: apply all)</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nsumy</span></code></p></td>
<td><p>Number of spectral components to apply in y direction (&lt;0: apply all)</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">impl</span></code></p></td>
<td><p>Index to determine actual derived class. 0 = Default. &lt;0 = In-house and experimental implementations. &gt;0 = Validated implementations available open software</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ipol</span></code></p></td>
<td><p>Index to request actual temporal interpolation scheme. 0 = Default (C^2 continous scheme). 1 = C^1 continous. 2 = C^3 continous</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">norder</span></code></p></td>
<td><p>Expansion order to apply in kinematics for z&gt;0. 0 = Apply expansion order specified in swd file (default). &lt;0 = Apply exp(kj z). &gt;0 = Apply expansion order = norder</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dc_bias</span></code></p></td>
<td><p>Control application of zero-frequency bias present in SWD file. false = Suppress contribution from zero frequency amplitudes (default). true  = Apply zero frequency amplitudes from SWD file.</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<p>An example of the required input parameters which needs to be specified in <em>waveinput.data</em> is given below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[swd wave properties]
swdfile     constant/fenton_h1.2_d1_l2.swd
# Optional SWD parameters. You probably do not need to change these. See the SWD documentation for what they mean
nsumx -1
nsumy -1
impl 0
ipol 0
norder 0
dc_bias false
</pre></div>
</div>
<p><em>Some additional notes regarding the use of swd:</em></p>
<ul class="simple">
<li><p>Water depth specified in the swd file will overrule the specified water depth given in <strong>[general input data]</strong> (see <a class="reference internal" href="#general-input-data"><span class="std std-numref">Section 5.3</span></a>).</p></li>
<li><p>Like irregular second order wave theory, the grid interpolation schemes presented in <a class="reference internal" href="#grid-interpolation-schemes"><span class="std std-numref">Section 5.10</span></a> are fully supported when using SWD. This comes very much in handy when large short crested irregular sea states from HOSM simulations are used as input.</p></li>
<li><p>The default reference position of the swd simulation is x0=y0=t0=0 and the wave propagation direction is in accordance with the coordinate system definition in (see <code class="xref std std-numref docutils literal notranslate"><span class="pre">coordinate_system:General</span> <span class="pre">input</span> <span class="pre">data</span></code>). To change reference position, see <a class="reference internal" href="#wave-reference-point"><span class="std std-numref">Section 5.4</span></a> and <code class="docutils literal notranslate"><span class="pre">swl</span></code> in <a class="reference internal" href="#general-input-data"><span class="std std-numref">Section 5.3</span></a>.</p></li>
</ul>
</div>
<div class="section" id="grid-interpolation-schemes">
<h2><span class="section-number">5.10. </span>Grid interpolation schemes<a class="headerlink" href="#grid-interpolation-schemes" title="Permalink to this headline">¶</a></h2>
<p>Grid interpolation is essential in order to speed up initiallization of CFD domains when using computationally expensive wave theories such as second order irregular wave theory and higher order spectral methods. The cell resolution in a CFD simulation where the kinematics components are required may be fare greater than what is needed to define the kinematics of the wave field with adequate accuracy. Using interpolation in time and space is will thus save lots of computation. In addition, defining kinematics on a grid rather than doing point by point randomly, simplifies parallelization.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>grid interpolation is currently only supported for use with second order irregular wave theory. For regular wave theories the us of grid interpolation will not result in a significant gain in performance.</p></li>
<li><p>In previous versions of CFDwavemaker a static interpolation grids was available. The performance of LSgrid is however far superior and this has therefore been removed.</p></li>
</ul>
</div>
<div class="section" id="lagrangian-stretched-grid-interpolation-lsgrid">
<h3><span class="section-number">5.10.1. </span>Lagrangian-Stretched grid interpolation (LSgrid)<a class="headerlink" href="#lagrangian-stretched-grid-interpolation-lsgrid" title="Permalink to this headline">¶</a></h3>
<p>The following statements can be said to be true for the kinematics vector field underneath an irregular sea surface:</p>
<ul class="simple">
<li><p>The velocity profiles are exponential</p></li>
<li><p>The largest velocities occuring at the surface</p></li>
<li><p>The largest spatial velocity gradients occur near the free surface</p></li>
<li><p>Wave kinematics above the free surface is irrelevant.</p></li>
</ul>
<p>The last statement might be obvious, but is what you will end up storing if your interpolation mesh is static. At the same time you will need to extrapolate the kinematics above the free surface to avoid loosing energy when the mesh is used for interpolation by the CFD solver. The best alternative is thus to have a mesh that moves with the free surface and that has a high density of cells close to the surface, an coarser for increasing water depths.
The Lagrangian-Stretched grid (in short LSgrid) is just that! A mesh structure optimized for storage of wave kinematics data and that allows for the use of simple interpolation technics.</p>
<p>LSgrid uses sigma transforms in combination with a stretching factor, giving high resolution in z direction at the surface, and lower at depth. The upper layer of the LSgrid will always be at the free surface, and the bottom layer will always be at the sea bed, such that all points of the mesh covers the fluid only. An example snapshot of such a grid is shown in the figure below.
This provides a very efficient way of describing the velocity profile underneath the sea surface accurately with a minimum number of points. The time interpolation is linear. To specify the use of a lagrangian streched grid interpolation scheme, the keyword <strong>[lsgrid]</strong> is used.</p>
<div class="figure align-default" id="id10">
<img alt="Lagrangian stretched mesh underneath an irregular wave event." src="_images/lsgrid2.png" />
<p class="caption"><span class="caption-number">Fig. 5.2 </span><span class="caption-text">Lagrangian stretched mesh underneath an irregular wave event.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>The following tags may be used to specify the properties of the <strong>lsgrid</strong></p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bounds</span></code></p></td>
<td><p>To generate a grid for which to generate wave kinematics, the boundaries needs to be known. The vertical boundary is known from the specified water depth (lower) and the wave elevation (upper), however for the horizontal directions (x and y), the boundaries needs to be specified here. Four values are needed: XMIN XMAX YMIN and YMAX. Values that are specified have unit meter. <strong>Note: Be sure to specify bounds which are well outside of your CFD domain. Most CFD codes uses ghost cells at the boundaries which also needs to be initialized. LSgrid will snap to closest grid point at the boundaries, hence if you CFD code asks for a kinematics at a point which is outside of the specified domain boundaries, your simulation may be inaccurate or in worst case crash. A warning is given if kinematics in a point outside of the domain is requested.</strong></p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nx</span></code></p></td>
<td><p>Number of grid points in the x-direction. Be sure to have sufficient grid points so that the highest frequency components are well defined within the grid. The grid is static in the horizontal directions</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ny</span></code></p></td>
<td><p>Number of grid points in the y-direction.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nl</span></code></p></td>
<td><p>Number of layers used to specify the wave profile in z-direction. In z-direction the grid is lagrangian (hence named layers) and unevenly distributed using a stretching factor. The ammount of strecthing is controlled by <code class="docutils literal notranslate"><span class="pre">stretch_params</span></code>. Default value for nl = 15.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">t0</span></code></p></td>
<td><p>Time (sec) to use when initializing interpolation grid at startup. Time step interpolation is performed by using essentially two LSgrids, on for <code class="docutils literal notranslate"><span class="pre">t0</span></code> and one for <code class="docutils literal notranslate"><span class="pre">t0</span></code> + <code class="docutils literal notranslate"><span class="pre">dt</span></code>. If the CFD simulation requires a point which is larger than <code class="docutils literal notranslate"><span class="pre">t0</span></code> + <code class="docutils literal notranslate"><span class="pre">dt</span></code>, the two grids are updated to reflect the next interpolation interval (t0+dt to t0+2dt) Default value t0 = 0.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dt</span></code></p></td>
<td><p>Resultion in time (sec). Be sure to check that the specified resolution is sufficient to capture the highest frequency components. Default value for this parameter is set to 0.1 sec.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stretch_params</span></code></p></td>
<td><p>Parameters which controls the ammount of stretching used. Reference is made to section XX for the definition of stretching</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ignore_subdomain</span></code></p></td>
<td><p>ignore subdomain is a nifty little feature that comes in hand when propagating waves into a domain from the boundaries at t &gt; 0. Often a kinematics description of the entire domain is only required during initialization (t=0). For all remaining time steps, it is sufficient to only update the LSgrid in the areas around the boundary. This little feature lets you do just that by specifying a set of “inner bounds”, which tells the code to ignore all cells within the bounding box for t &gt; 0. This saves a lot of unneccessary compute. The bounds of <code class="docutils literal notranslate"><span class="pre">ignore_subdomain</span></code> are defined identical to <code class="docutils literal notranslate"><span class="pre">bounds</span></code>. Four parameters are given on the same line, XMIN, XMAX, YMIN and YMAX. By default no cells are ignored for t &gt; 0.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ignore_at_init</span></code></p></td>
<td><p>Initializing the entire grid with second order wave theory is time consuming. If you wish to start the simulation from still water (as in a model test tank), you should set this feature to 1. The initialization of the lsgrid will then be skipped and all kinematics will be set to zero.</p></td>
<td><p>no (default 0)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">init_only</span></code></p></td>
<td><p>If you are only interested in kinematics at time=`t0`, which is the case if you want to use it for initialization of the domain only, without any boundary values for time &gt; 0, then some speedup may be achieved by setting this parameter = 1. default is however <a href="#id7"><span class="problematic" id="id8">``</span></a>init_only``=0.</p></td>
<td><p>no (default 0)</p></td>
</tr>
</tbody>
</table>
<p>An example input description is given below</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[lsgrid]
#         XMIN   XMAX   YMIN   YMAX
bounds -1401.00 601.00 -901.00 1101.00
nx  500
ny  500
nl  16
t0  0.0
dt  0.5
stretch_params 0.7   1.5
#                 xmin     xmax   ymin   ymax
ignore_subdomain -1398.00 602.00 -902.00 1102.00
ignore_at_init 0
</pre></div>
</div>
<p><strong>Additional notes on LSgrid:</strong></p>
<p>For long crested simulations it is sufficient to have a resolutions ny=1, assuming wave propagates along the x-axis.  The value of ymin and ymax is then not of importances since interpolation is only done in x and z direction.</p>
<p>VTK files can be writted as long as at least nx or ny &gt; 1. (i.e. 3D or 2D).</p>
<p>The LSgrid functions are parallelized using openMP, hence a a significant performance boost is gain by running on multiple cores.</p>
</div>
</div>
<div class="section" id="output">
<h2><span class="section-number">5.11. </span>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>The primary objective of the library is to provide kinematics by calling the C extern functions provided in CFDwavemaker.h.
It is also possible to make CFDwavemaker dump kinematics directly to file. This can be convenient for QA, or if wave kinematics is needed for other purposes.</p>
<div class="section" id="vtk">
<h3><span class="section-number">5.11.1. </span>VTK<a class="headerlink" href="#vtk" title="Permalink to this headline">¶</a></h3>
<p>When using interpolation scheme, wave kinematics is stored on a grid for quick interpolation. This grid can be dumped a VTK file (.vtu) which is a well established format provided through the <a class="reference external" href="http://www.vtk.org">VTK library</a> . The files may be visualized and processed further using <a class="reference external" href="http://www.paraview.org">Paraview</a> or other software.
To achieve this, the tag <strong>[vtk output]</strong> needs to be specified.
Everytime the grid is updated, a new .vtu file is written for the time t = t0.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p><strong>description</strong></p></td>
<td><p><strong>mandatory</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">storage_path</span></code></p></td>
<td><p>Path to the directory where the .vtu files should be stored.</p></td>
<td><p>yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>prefix kinematics files. Defaults is “kinematics”. Hence files will be named kinematics0000.vtu, kinematics0001.vtu, … etc.</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timelabel</span></code></p></td>
<td><p>If you wish to compare the resulting output vtu files to vtu files from the CFD simulation, then it is important that the timelabel is the same in both vtu file sets. The default value is <em>TimeValue</em> which works well with OpenFOAM. For ComFLOW, set this value to <em>TIME</em>.</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<p>For now, it is not possible to choose a different time step than what is used to in <strong>[LSgrid]</strong>. This may be updated in the future.</p>
<p><strong>Example code:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[vtk output]
storage_path ./vtk/
filename kinematics
</pre></div>
</div>
</div>
<div class="section" id="time-series">
<h3><span class="section-number">5.11.2. </span>Time-series<a class="headerlink" href="#time-series" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Not yet fully implemented.</p>
</div>
<p>Time traces of surface elevation and kinematics may be dumped during runtime for QA purposes.</p>
<p><strong>Example code:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[timeseries output]
storage_path ./ts/
filename tsfile
npos 3
# x y z
0.0 0.0 0.0
3.3 5.4 -10.
0.0 5.4 -10.
</pre></div>
</div>
</div>
<div class="section" id="spectral-data">
<h3><span class="section-number">5.11.3. </span>Spectral data<a class="headerlink" href="#spectral-data" title="Permalink to this headline">¶</a></h3>
<p>Writes spectral components to file (in case irregular waves are run). Useful for QA purposes. This is always down after input file have been read, hence no additional keyword is required in the input file. Data is written to the file <em>spectral_components.dat</em>. For convenience the output format is such that it can be copied directly into a <em>waveinput.dat</em> file. (see <a class="reference internal" href="#manual-specification"><span class="std std-numref">Section 5.6.1</span></a>)</p>
<p>The example below illustrates the format for which the spectral data is dumped.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># spectral wave data output
# [irregular wave components]
# nfreq 5
# ndir 0
# OMEGA [rad/s]    A[m]       K[rad/m]        Phase[rad]    theta[rad]
0.80684460     0.09098686     0.06636591    22.09105101    -0.51238946
0.57527858     0.08989138     0.03410555    -8.15520380    -1.01219701
0.59315305     0.20143761     0.03615181    -8.35009702    -0.92729522
0.71493207     0.09704876     0.05213889    11.00239563    -0.58800260
0.73560378     0.15043259     0.05518335    14.76881712    -0.55165498
</pre></div>
</div>
</div>
</div>
<div class="section" id="tips-tricks">
<h2><span class="section-number">5.12. </span>Tips &amp; tricks<a class="headerlink" href="#tips-tricks" title="Permalink to this headline">¶</a></h2>
<p>The comment marker # is useful for turning on and off features temporarily. For instance, switching from second order to first order waves are simply done by adding a # infront of <strong>[second order]</strong>. Turning of grid interpolation is simply done by adding # infront of <strong>[lsgrid]</strong>, and all the remaining parameters assosiated to this tag will be ignored. Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#[lsgrid]
#         XMIN   XMAX   YMIN   YMAX
bounds -1401.00 601.00 -901.00 1101.00
nx  500
ny  500
nl  16
t0  0.0
dt  0.5
stretch_params 0.7   1.5
#                 xmin     xmax   ymin   ymax
ignore_subdomain -1398.00 602.00 -902.00 1102.00
</pre></div>
</div>
<p>Be sure to calculate a resonable value for <code class="docutils literal notranslate"><span class="pre">bandwidth</span></code>. This can save quite a lot of computation.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="inputfile_examples.html" class="btn btn-neutral float-right" title="6. Example of usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="4. Installation and usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>